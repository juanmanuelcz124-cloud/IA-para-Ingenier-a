<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NetHub Super Dashboard</title>
    
    <!-- Tailwind CSS (Para estilos rápidos y modernos) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons (Iconos) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Estilos Personalizados (Esto iría en tu style.css) -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-slate-900 text-slate-100 h-screen flex selection:bg-blue-500 selection:text-white">

    <!-- SIDEBAR -->
    <aside class="w-20 md:w-64 bg-slate-950 border-r border-slate-800 flex flex-col justify-between transition-all duration-300 flex-shrink-0">
        <div>
            <!-- Logo -->
            <div class="p-6 flex items-center justify-center md:justify-start gap-3">
                <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center shadow-lg shadow-blue-500/20">
                    <i data-lucide="globe" class="text-white w-5 h-5"></i>
                </div>
                <span class="font-bold text-xl hidden md:block tracking-tight text-white">Net<span class="text-blue-500">Hub</span></span>
            </div>

            <!-- Navegación -->
            <nav class="mt-8 flex flex-col gap-2 px-3" id="nav-container">
                <!-- Botones generados dinámicamente o estáticos -->
                <button onclick="switchTab('wiki')" class="nav-btn w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 group bg-blue-600/10 text-blue-400 border border-blue-600/20" id="btn-wiki">
                    <i data-lucide="search" class="w-5 h-5"></i>
                    <div class="text-left hidden md:block overflow-hidden">
                        <div class="font-medium text-sm">Wikipedia</div>
                        <div class="text-xs text-slate-600 truncate">Buscar en Internet</div>
                    </div>
                </button>

                <button onclick="switchTab('weather')" class="nav-btn w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 group hover:bg-slate-900 text-slate-400 hover:text-white border border-transparent" id="btn-weather">
                    <i data-lucide="cloud-rain" class="w-5 h-5"></i>
                    <div class="text-left hidden md:block overflow-hidden">
                        <div class="font-medium text-sm">Clima Global</div>
                        <div class="text-xs text-slate-600 truncate">Datos en tiempo real</div>
                    </div>
                </button>

                <button onclick="switchTab('chat')" class="nav-btn w-full flex items-center gap-4 p-3 rounded-xl transition-all duration-200 group hover:bg-slate-900 text-slate-400 hover:text-white border border-transparent" id="btn-chat">
                    <i data-lucide="message-square" class="w-5 h-5"></i>
                    <div class="text-left hidden md:block overflow-hidden">
                        <div class="font-medium text-sm">Chat IA</div>
                        <div class="text-xs text-slate-600 truncate">Requiere API Key</div>
                    </div>
                </button>
            </nav>
        </div>

        <!-- Botón Configuración -->
        <div class="p-4 border-t border-slate-800">
            <button onclick="toggleSettings()" class="flex items-center justify-center md:justify-start gap-3 w-full p-3 rounded-xl hover:bg-slate-800 text-slate-400 hover:text-white transition-all">
                <i data-lucide="settings" class="w-5 h-5"></i>
                <span class="hidden md:block text-sm font-medium">Configuración</span>
            </button>
        </div>
    </aside>

    <!-- ÁREA PRINCIPAL -->
    <main class="flex-1 relative flex flex-col h-full overflow-hidden bg-slate-900 w-full">
        
        <!-- HEADER -->
        <header class="h-16 border-b border-slate-800 flex items-center justify-between px-6 bg-slate-900/50 backdrop-blur-md z-10 flex-shrink-0">
            <h2 id="header-title" class="text-lg font-semibold text-slate-200">Explorador de Conocimiento</h2>
            <div class="flex items-center gap-2">
                <div id="status-indicator" class="w-2 h-2 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.5)]"></div>
                <span id="status-text" class="text-xs text-slate-500 font-medium uppercase tracking-wider hidden sm:block">Conectado</span>
            </div>
        </header>

        <!-- CONTENIDO SCROLLEABLE -->
        <div class="flex-1 overflow-y-auto p-4 md:p-8 scroll-smooth relative">
            <div class="max-w-5xl mx-auto h-full">
                
                <!-- SECCIÓN WIKIPEDIA -->
                <div id="section-wiki" class="fade-in h-full flex flex-col">
                    <div class="bg-gradient-to-br from-slate-800 to-slate-900 p-8 rounded-2xl border border-slate-700 shadow-xl mb-6 text-center flex-shrink-0">
                        <h1 class="text-3xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-white to-slate-400">Buscador Global</h1>
                        <p class="text-slate-400 mb-6">Acceso directo a Wikipedia API (Sin Key).</p>
                        
                        <form onsubmit="searchWiki(event)" class="relative max-w-xl mx-auto">
                            <input type="text" id="wiki-input" placeholder="¿Qué quieres saber hoy?" class="w-full bg-slate-950 border border-slate-700 rounded-full py-4 px-6 pr-12 text-slate-100 placeholder-slate-500 focus:ring-2 focus:ring-blue-500 outline-none shadow-lg transition-all">
                            <button type="submit" class="absolute right-2 top-2 p-2 bg-blue-600 hover:bg-blue-500 rounded-full text-white transition-colors flex items-center justify-center w-10 h-10">
                                <i data-lucide="search" class="w-5 h-5"></i>
                            </button>
                        </form>
                    </div>
                    
                    <div id="wiki-loading" class="hidden text-center py-10">
                        <div class="loader mx-auto mb-2"></div>
                        <p class="text-slate-500">Buscando...</p>
                    </div>

                    <div id="wiki-results" class="grid gap-4 pb-10">
                        <!-- Resultados se inyectan aquí -->
                        <div class="text-center text-slate-500 mt-10">
                            <p>Los resultados aparecerán aquí.</p>
                        </div>
                    </div>
                </div>

                <!-- SECCIÓN CLIMA -->
                <div id="section-weather" class="fade-in hidden h-full flex flex-col items-center justify-center p-4">
                    <div class="w-full max-w-2xl bg-gradient-to-br from-blue-900 to-slate-900 rounded-3xl p-8 shadow-2xl border border-blue-800/50 text-white relative overflow-hidden">
                        <!-- Glow effect -->
                        <div class="absolute top-0 right-0 w-64 h-64 bg-blue-500/20 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3 pointer-events-none"></div>
                        
                        <div class="flex justify-between items-start relative z-10 mb-8">
                            <div>
                                <h2 class="text-sm font-medium text-blue-200 uppercase tracking-wider mb-1">Clima Actual</h2>
                                <select id="city-select" onchange="fetchWeather()" class="bg-transparent text-3xl font-bold border-none outline-none cursor-pointer hover:text-blue-200 transition-colors appearance-none p-0 m-0">
                                    <option value="Madrid" class="bg-slate-900">Madrid</option>
                                    <option value="Mexico City" class="bg-slate-900">Mexico City</option>
                                    <option value="Buenos Aires" class="bg-slate-900">Buenos Aires</option>
                                    <option value="Bogotá" class="bg-slate-900">Bogotá</option>
                                    <option value="New York" class="bg-slate-900">New York</option>
                                    <option value="Tokyo" class="bg-slate-900">Tokyo</option>
                                    <option value="London" class="bg-slate-900">London</option>
                                </select>
                            </div>
                            <div class="p-3 bg-white/10 rounded-full backdrop-blur-md">
                                <i data-lucide="sun" class="text-yellow-400 w-8 h-8"></i>
                            </div>
                        </div>

                        <div id="weather-loading" class="h-48 flex items-center justify-center hidden">
                            <div class="loader"></div>
                        </div>

                        <div id="weather-content" class="relative z-10">
                            <div class="flex items-center justify-center mb-8">
                                <span id="weather-temp" class="text-8xl font-bold tracking-tighter">--°</span>
                            </div>
                            
                            <div class="grid grid-cols-3 gap-4">
                                <div class="bg-white/5 rounded-xl p-3 flex flex-col items-center justify-center backdrop-blur-sm border border-white/5">
                                    <i data-lucide="wind" class="text-blue-300 w-4 h-4 mb-1"></i>
                                    <span class="text-xs text-blue-200/70 mb-1">Viento</span>
                                    <span id="weather-wind" class="font-semibold">-- km/h</span>
                                </div>
                                <div class="bg-white/5 rounded-xl p-3 flex flex-col items-center justify-center backdrop-blur-sm border border-white/5">
                                    <i data-lucide="droplets" class="text-blue-300 w-4 h-4 mb-1"></i>
                                    <span class="text-xs text-blue-200/70 mb-1">Mínima</span>
                                    <span id="weather-min" class="font-semibold">--°</span>
                                </div>
                                <div class="bg-white/5 rounded-xl p-3 flex flex-col items-center justify-center backdrop-blur-sm border border-white/5">
                                    <i data-lucide="map-pin" class="text-blue-300 w-4 h-4 mb-1"></i>
                                    <span class="text-xs text-blue-200/70 mb-1">Latitud</span>
                                    <span id="weather-lat" class="font-semibold">--</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p class="mt-6 text-slate-500 text-sm">Datos proporcionados por Open-Meteo API</p>
                </div>

                <!-- SECCIÓN CHAT -->
                <div id="section-chat" class="fade-in hidden flex flex-col h-[calc(100vh-140px)] bg-slate-950 rounded-2xl border border-slate-800 overflow-hidden shadow-2xl">
                    <div id="chat-messages" class="flex-1 overflow-y-auto p-4 space-y-4">
                        <!-- Mensaje Sistema Inicial -->
                        <div class="flex justify-start">
                            <div class="max-w-[80%] rounded-2xl p-4 bg-yellow-900/20 text-yellow-200 border border-yellow-800/50">
                                Hola. Soy un asistente local. Para funcionar necesito una API Key de Google Gemini en configuración, pero el resto de la app funciona sin ella.
                            </div>
                        </div>
                    </div>

                    <!-- Indicador escribiendo -->
                    <div id="chat-typing" class="hidden px-4 pb-2">
                        <div class="bg-slate-800 rounded-2xl p-3 inline-flex gap-2 items-center text-slate-400 text-xs">
                            <div class="loader w-3 h-3 border-2"></div>
                            <span>Pensando...</span>
                        </div>
                    </div>

                    <div class="p-4 bg-slate-900 border-t border-slate-800 flex-shrink-0">
                        <form onsubmit="sendChatMessage(event)" class="flex gap-2">
                            <input type="text" id="chat-input" placeholder="Escribe un mensaje..." class="flex-1 bg-slate-950 border border-slate-700 rounded-xl px-4 py-3 text-white placeholder-slate-600 focus:ring-2 focus:ring-blue-600 outline-none transition-all">
                            <button type="submit" id="chat-btn" class="bg-blue-600 hover:bg-blue-500 text-white p-3 rounded-xl transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                                <i data-lucide="send" class="w-5 h-5"></i>
                            </button>
                        </form>
                    </div>
                </div>

            </div>
        </div>

        <!-- MODAL CONFIGURACIÓN -->
        <div id="settings-modal" class="hidden absolute inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
            <div class="bg-slate-900 border border-slate-700 p-6 rounded-2xl w-full max-w-md shadow-2xl">
                <h3 class="text-xl font-bold mb-4 text-white">Configuración</h3>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-400 mb-2">Google Gemini API Key</label>
                    <input type="password" id="api-key-input" placeholder="AIza..." class="w-full bg-slate-800 border border-slate-700 rounded-lg p-3 text-sm focus:ring-2 focus:ring-blue-500 outline-none text-white placeholder-slate-500">
                    <p class="text-xs text-slate-500 mt-2">
                        La clave se guarda en tu navegador (LocalStorage).
                    </p>
                </div>
                <div class="flex justify-end">
                    <button onclick="saveSettings()" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Guardar y Cerrar
                    </button>
                </div>
            </div>
        </div>

    </main>

    <!-- LÓGICA JAVASCRIPT (Esto iría en tu script.js) -->
    <script src="script.js"></script>
</body>
</html>